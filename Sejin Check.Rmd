---
title: "Initial Project Report"
author: "Group 2"
date: "2024-03-08"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#1 Introduction

Sejin Paik is a graduate student in the Boston University College of Communication Division of Emerging Media Studies. In a pilot study, Reframing the News Through Social Media Curation Design, she aims to explore the potential impacts of social media feed curation on users’ perceptions of news items and use the results to help with dissertation. Her research questions were the following: 
How does the activism feed affect perceptions of news credibility compared to the other surrounding-content newsfeeds?
How does the advertisement feed affect perceptions of a) news credibility, b) newsworthiness and c) shareworthiness of the news compared to the other surrounding-content newsfeeds?
How does news valence moderate the impact of external content elements on a) news credibility, b) newsworthiness, and c) shareworthiness? 
How do perceptions of news credibility, newsworthiness and shareworthiness in different curated newsfeeds vary between American and Chinese participants? 
From those questions, she formulated two main hypotheses. 
Memes will produce a greater level of a) credibility, b) newsworthiness, and c) shareworthiness perceptions of the news compared to the news-only newsfeed.
Activism will produce a greater level of a) newsworthiness and b) shareworthiness perception of the news compared to the other content surrounding newsfeeds.

Sejin’s data came from two different samples. The first sample was composed of 661 participants from the United States and the second sample was composed of 484 participants from China. Participants in both samples were randomly assigned to one of eight conditions according to a 4 by 2 factorial design. There were two independent variables, one with four levels and a second with two levels. The first independent variable was feed content type, which was one of the following: activism, advertisements, memes, and news. The second independent variable was story valence, which was either positive or negative. She also provided a copy of the manuscript for her paper, which included some of her background research and hypotheses, a copy of the survey that was distributed to the participants, and the SPSS output for her analyses.

Each newsfeed condition consists of seven posts: a positive or negative news story positioned fourth in the vertical newsfeed stack, surrounded by one of four content elements (memes, ads, activism, or additional news stories). The feeds were presented with topic filtering to reduce potential confounding variables and the topic is about artificial intelligence (AI), a relatively politically neutral subject.

The client requested assistance with a few tasks. First, she requested a duplication of ANOVA and ANCOVA tests that were performed to test her hypotheses to ensure that accurate results were obtained. Second, she requested that the results of the assumption checking be verified, as well as assistance with potentially modifying the analysis depending on whether the appropriate assumptions were met. Third, she asked that if there any potentially alternative or additional methods of analysis that might be more appropriate to answer her hypotheses and research questions, that those be recommended to her.

# Packages
```{r packageload,echo=FALSE}
library(readr)
library(dplyr)
library(car)
library(ggplot2)
library(gridExtra)
```

# Data loading
```{r dataload,echo=FALSE}
CNdata_filtered_120123 <- read_csv("CNdata_filtered_120123.csv")
ENdata_filtered_110123 <- read_csv("ENdata_filtered_110123.csv")
```

#2 Data preparation
The surveys were administered to participants via Qualtrics and delivered to the consulting group as two separate .csv files, one for the American sample and one for the Chinese sample. They both contained variables such as the feed content and valence conditions the participants were assigned to, ratings of news credibility, ratings of newsworthiness, and ratings of news shareworthiness.

One of the main steps required as part of the data preparation was standardizing the labels for the main variables of interest in the data, since there were some labeling discrepancies between the two datasets. A second step involved changing certain variables to the appropriate data classes. For example, the “valence” variable had to be changed from numeric to factor. The next step was to filter the relevant variables for the analysis from each of the datasets to include in the analysis; both sets included hundreds of columns, many of which were unrelated to the relevant objectives. The final step involved combining the American and Chinese datasets to form a cohesive dataset that would allow for the analysis to be performed.

```{r dataprep, echo=FALSE}
###need to use cred and nw totals... 

#Chinese data, renaming/changing data types to factors
CNdata_filtered_120123$Feed <- CNdata_filtered_120123$feed_typefour
CNdata_filtered_120123$Feed <- as.factor(CNdata_filtered_120123$Feed)
CNdata_filtered_120123$valence <- as.factor(CNdata_filtered_120123$valence)

#Chinese data, selecting relevant variables
Data_CN <- CNdata_filtered_120123 |> 
  dplyr::select(Feed,valence,credavg_all,nwavg_all,share_all,NewsSharing_SM,NewsCred_SM,AI_acceptance,GenTech_op,gender,age) |> 
  mutate(Group = 1)

#English data, adding/renaming relevant variables
ENdata_filtered_110123$NewsCred_SM <- unlist(ENdata_filtered_110123[,255])#rename to match CN data

#English data, selecting relevant variables
Data_EN <-ENdata_filtered_110123 |> 
  dplyr::mutate(valence = feed_valence) |>
  dplyr::mutate(Feed = feedtype_four) |> 
  dplyr::select(Feed,valence,credavg_all,nwavg_all,share_all,NewsSharing_SM,NewsCred_SM,AI_acceptance,GenTech_op,gender,age) |> 
  mutate(Group = 0)

#English data, changing data types to factors
Data_EN$Feed <- as.factor(Data_EN$Feed)
Data_EN$valence <- as.factor(Data_EN$valence)

#one dataframe, Group (1 = Chinese 0 = American)
Data <- rbind(Data_CN,Data_EN)
Data$Group <- as.factor(Data$Group)

#fixing age and gender
Data$age <- 2024 - Data$age
Data$gender <- as.factor(Data$gender)

#can select additional variables for regression, these were just the ones that stuck out as easy to add
```


#3 Analysis

```{r plots,echo=FALSE}
#Feed X Shareworthiness (ordinal, so boxplot)
boxS1 <- ggplot(Data_EN, aes(Feed,share_all,fill=Feed)) +
  geom_boxplot() + 
  ggtitle("English Data Feed Type and Shareworthiness Scores (Ordinal)")

boxS2 <- ggplot(Data_CN, aes(Feed,share_all,fill=Feed)) +
  geom_boxplot() + 
  ggtitle("Chinese Data Feed Type and Shareworthiness Scores (Ordinal)")

boxS3 <- ggplot(Data, aes(Feed, share_all,fill=Feed)) +
  geom_boxplot() +
  ggtitle("All Data Feed Type and Shareworthiness Scores (Ordinal)")

grid.arrange(boxS1,boxS2,boxS3,nrow=1)

#------------------------------------------------------------------------------

#Feed X Creditworthiness
ViolinC1 <- ggplot(Data_EN, aes(Feed,credavg_all,fill=Feed)) +
  geom_violin() +
  ggtitle("English Data Feed Type and Creditworthiness Scores")

ViolinC2 <- ggplot(Data_CN, aes(Feed,credavg_all,fill=Feed)) +
  geom_violin() +
  ggtitle("Chinese Data Feed Type and Creditworthiness Scores")

ViolinC3 <- ggplot(Data, aes(Feed,credavg_all,fill=Feed)) +
  geom_violin() +
  ggtitle("All Data Feed Type and Creditworthiness Scores")

grid.arrange(ViolinC1,ViolinC2,ViolinC3, nrow=1)

#------------------------------------------------------------------------------

#Feed X Shareworthiness
ViolinS1 <- ggplot(Data_EN, aes(Feed,share_all,fill=Feed)) +
  geom_violin() +
  ggtitle("English Data Feed Type and Shareworthiness Scores")

ViolinS2 <- ggplot(Data_CN, aes(Feed,share_all,fill=Feed)) + 
  geom_violin() +
  ggtitle("Chinese Data Feed Type and Shareworthiness Scores")

ViolinS3 <- ggplot(Data, aes(Feed, share_all,fill=Feed)) +
  geom_violin() +
  ggtitle("All Data Feed Type and Shareworthiness Scores")

grid.arrange(ViolinS1,ViolinS2,ViolinS3, nrow=1)

```


# Hypothesis 2
Activism will produce a greater level of:
  a) Newsworthiness
  b) Share-worthiness
Compared with the other 3 feeds.

This hypothesis was originally tested with ANCOVAs, with the feed content types and valences treated as independent variables and the following items as covariates: participants' frequency of sharing news posts on social media, attitudes on technology's impact (positive or negative) on society, and feelings toward AI automation. However, the client requested that the assumptions for these tests be repeated in order to make sure that these tests were appropriate.

## Hypothesis 2 Assumption checks

The first assumption to be checked was the normality of residuals.This assumption was for the Chinese and English datasets individually, since the client ran the tests on each sample separately; these assumption checks were repeated. The assumption was also checked for the combined dataset, since it is appropriate to check given that the data for the two groups were capable of being combined and the pertinent hypothesis does not explicitly reference a distinction between the two groups. The assumption was also checked for the Credibility measure, since this is required for some of the tests performed later in the analysis.First, visuals were created:

```{r residual normality, echo=FALSE}
#Residual Check for the 3 main outcome variables for the English data only

# Credibility
res_cred_EN <- aov(credavg_all~Feed,Data_EN)
# Newsworthiness
res_NW_EN <- aov(nwavg_all~Feed,Data_EN)
# Shareworthiness
res_SW_EN <- aov(credavg_all~Feed,Data_EN)

#Residual Check for the 3 main outcome variables for the Chinese data only

# Credibility
res_cred_CN <- aov(credavg_all~Feed,Data_CN)
# Newsworthiness
res_NW_CN <- aov(nwavg_all~Feed,Data_CN)
# Shareworthiness
res_SW_CN <- aov(credavg_all~Feed,Data_CN)

# Residual Check for the 3 main outcome variables for the combined data

# Credibility
res_cred_Data <- aov(credavg_all~Feed,Data)
# Newsworthiness
res_NW_Data <- aov(nwavg_all~Feed,Data)
# Shareworthiness
res_SW_Data <- aov(credavg_all~Feed,Data)

```


```{r normality plots,echo=FALSE}
# English only

#plots, histogram and QQ
par(mfrow=c(2,3))
hist(res_cred_EN$residuals)
hist(res_NW_EN$residuals)
hist(res_SW_EN$residuals)
qqPlot(res_cred_EN$residuals,id=FALSE)
qqPlot(res_NW_EN$residuals,id=FALSE)
qqPlot(res_SW_EN$residuals,id=FALSE)


# Chinese only

#plots, histogram and QQ
par(mfrow=c(2,3))
hist(res_cred_CN$residuals)
hist(res_NW_CN$residuals)
hist(res_SW_CN$residuals)
qqPlot(res_cred_CN$residuals,id=FALSE)
qqPlot(res_NW_CN$residuals,id=FALSE)
qqPlot(res_SW_CN$residuals,id=FALSE)


# combined

#plots, histogram and QQ
par(mfrow=c(2,3))
hist(res_cred_Data$residuals)
hist(res_NW_Data$residuals)
hist(res_SW_Data$residuals)
qqPlot(res_cred_Data$residuals,id=FALSE)
qqPlot(res_NW_Data$residuals,id=FALSE)
qqPlot(res_SW_Data$residuals,id=FALSE)
```

As is shown in the plots above,the residuals look skewed in opposite directions for the English and Chinese datasets for all three outcomes of interest. However, they appear uniformly distributed when the data are combined. Next, normality of the dependent variables was formally tested with the Shapiro-Wilk Test.
```{r SW,echo=FALSE}
shapiro.test(res_cred_Data$residuals)
shapiro.test(res_NW_Data$residuals)
shapiro.test(res_SW_Data$residuals)
```


Another assumption that had to be checked was the homogeneity of variance. Levene's Test was performed to verify that this assumption holds true across the four feed conditions and the two valence conditions; it was applied for both the English and Chinese datasets, to replicate what the client did, and also for the combined data, to help inform the next steps for analysis.

```{r homogeneity of variance, echo=FALSE}
###Use Levene's
library(car)

##newsworthiness... p > .05 for all three partitions of the data, so no concerns about heterogeneity of variance for newsworthiness across the 4 different feed types
leveneTest(nwavg_all~Feed,data=Data_EN) #passed
leveneTest(nwavg_all~Feed,data=Data_CN) #passed
leveneTest(nwavg_all~Feed,data=Data) #passed

##shareworthiness...
leveneTest(share_all~Feed,data=Data_EN) #failed X
leveneTest(share_all~Feed,data=Data_CN) #passed
leveneTest(share_all~Feed,data=Data) #passed


##creditworthiness...
leveneTest(credavg_all~Feed,data=Data_EN) #failed X
leveneTest(credavg_all~Feed,data=Data_CN) #passed
leveneTest(credavg_all~Feed,data=Data) #passed

#-------------------------------------------

#valence

#newsworthiness
leveneTest(nwavg_all~valence,data=Data_EN) #failed X
leveneTest(nwavg_all~valence,data=Data_CN) #passed
leveneTest(nwavg_all~valence,data=Data) # failed X

##shareworthiness...
leveneTest(share_all~valence,data=Data_EN) # passed 
leveneTest(share_all~valence,data=Data_CN) # passed
leveneTest(share_all~valence,data=Data) # passed

##creditworthiness...
leveneTest(credavg_all~valence,data=Data_EN) # failed X
leveneTest(credavg_all~valence,data=Data_CN) # passed
leveneTest(credavg_all~valence,data=Data) # passed


```
The Levene's Tests 

#4 Conclusions

The assumptions for the tests utilized were not met in all cases. Assumptions of normality for the outcomes of interest were not met. This means that alternative tests are required for some of the hypothesis testing and to answer the research questions appropriately.
